<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="WhatTheySaid.News - Accountability Through Quotes">
  <meta name="theme-color" content="#ffffff">
  <link rel="manifest" href="/manifest.json">
  <title>WhatTheySaid.News</title>
  <link rel="stylesheet" href="/css/styles.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8204858761090995"
       crossorigin="anonymous"></script>
</head>
<body>
  <div id="app">
    <header>
      <nav>
        <div class="logo-group">
          <a href="/" class="logo" onclick="navigate(event, '/')">WhatTheySaid.News</a>
          <span class="logo-subhead">Accountability Through Quotes</span>
        </div>
        <div class="header-search">
          <input type="search" id="header-search-input" placeholder="Search quotes, authors, topics..." class="search-input" onkeydown="if(event.key==='Enter')doHeaderSearch()">
          <button class="search-btn" onclick="doHeaderSearch()" aria-label="Search">&#x1F50D;</button>
        </div>
        <div class="nav-links">
          <a href="/" onclick="navigate(event, '/')">Home</a>
          <a href="#" id="nav-analytics" onclick="openAnalytics(event)">Analytics</a>
          <a href="/review" id="nav-review" onclick="navigate(event, '/review')" class="nav-link-review" style="display: none;">
            Review
            <span class="review-badge" id="review-badge" style="display: none;">0</span>
          </a>
          <a href="/settings" id="nav-settings" onclick="navigate(event, '/settings')" style="display: none;">Settings</a>
          <a href="/login" id="nav-login" onclick="navigate(event, '/login')" style="display: none;">Login</a>
          <a href="#" id="nav-logout" onclick="logout(event)" style="display: none;">Logout</a>
        </div>
      </nav>
    </header>

    <main id="content">
      <!-- Content loaded by JS router -->
      <div class="loading">Loading...</div>
    </main>

    <!-- AdSense footer ad (public pages only) -->
    <div id="ad-container" class="ad-container" style="display: none;">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-8204858761090995"
           data-ad-slot=""
           data-ad-format="horizontal"
           data-full-width-responsive="true"></ins>
    </div>

    <footer>
      <p>&copy; 2026 WhatTheySaid.News / GGM, LLC.</p>
    </footer>
  </div>

  <!-- Analytics Modal -->
  <div id="analytics-modal" class="modal-overlay" style="display:none" onclick="if(event.target===this)closeAnalytics()">
    <div class="analytics-modal-content">
      <div class="analytics-modal-header">
        <h2>Analytics</h2>
        <button class="modal-close analytics-modal-close" onclick="closeAnalytics()">&times;</button>
      </div>
      <div class="analytics-tabs">
        <button class="analytics-tab active" data-tab="overview" onclick="switchAnalyticsTab('overview')">Overview</button>
        <button class="analytics-tab" data-tab="quotes" onclick="switchAnalyticsTab('quotes')">Top Quotes</button>
        <button class="analytics-tab" data-tab="authors" onclick="switchAnalyticsTab('authors')">Top Authors</button>
        <button class="analytics-tab" data-tab="topics" onclick="switchAnalyticsTab('topics')">Trending Topics</button>
        <button class="analytics-tab" data-tab="trends" onclick="switchAnalyticsTab('trends')">Trends</button>
      </div>
      <div class="analytics-body" id="analytics-body"></div>
    </div>
  </div>

  <!-- Modal for log details -->
  <div id="modal-overlay" class="modal-overlay hidden" onclick="if(event.target===this)closeModal()">
    <div class="modal">
      <button class="modal-close" onclick="closeModal()">&times;</button>
      <div id="modal-content"></div>
    </div>
  </div>

  <!-- Socket.IO for real-time updates -->
  <script src="/socket.io/socket.io.js"></script>

  <!-- Chart.js for analytics visualizations -->
  <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4/dist/chart.umd.min.js"></script>

  <script src="/js/api.js"></script>
  <script src="/js/vote.js"></script>
  <script src="/js/charts.js"></script>
  <script src="/js/analytics.js"></script>
  <script src="/js/home.js"></script>
  <script src="/js/quote.js"></script>
  <script src="/js/article.js"></script>
  <script src="/js/author.js"></script>
  <script src="/js/settings.js"></script>
  <script src="/js/review.js"></script>
  <script src="/js/logs.js"></script>
  <script src="/js/login.js"></script>
  <script src="/js/resetPassword.js"></script>
  <script src="/js/app.js"></script>

  <script>
    function doHeaderSearch() {
      const input = document.getElementById('header-search-input');
      const query = input.value.trim();
      if (query.length >= 2) {
        navigate(null, '/?search=' + encodeURIComponent(query));
      }
    }
  </script>
</body>
</html>
